<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>24-Hour Weekly Calendar</title>
  <style>
    /* You can also include inline CSS styles here */
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 0;
    }
    .calendar-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      overflow: auto; /* Add overflow property to contain floated elements */
    }
    .calendar {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background: transparent;
    }
    table {
      width: 100%;
      background: transparent;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #333;
      color: #fff;
    }
    th, td {
      font-size: 16px;
    }
    td:hover {
      background-color: #f0f0f0;
    }
    .time-cell {
      font-weight: bold;
    }
    .title {
      text-align: center;
    }
    .insert-section {
      text-align: center;
      width: 45%;

      padding-left: 0;
      float: left;
    }

    .recurring-container label {
        font-weight: bold;
        display: block; /* Display the label as a block element to put it on top */
    }
    .recurring-container{
      height: auto;
      width: 45%;
      padding-right: 2.5%;
      float: right;
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr 1fr 1fr 1fr;
      grid-template-rows: 1fr 0.5fr 0.7fr 1fr 1fr 1fr;
      gap: 0 0;
      grid-template-areas:
    "Recurring-Label Recurring-Label Recurring-Button . Description Description Description"
    "Sun Mon Tues Wed Thurs Fri Sat"
    "sunLabel monLabel tueLabel wedLabel thurLabel friLabel satLabel"
    "StartLabel Beginning-Date Beginning-Date . EndLabel Ending-Date Ending-Date"
    "startTimeLabel startTime startTime . endTimeLabel endTime endTime"
    ". . . insertRecButton . . .";
    }
    .Recurring-Label { grid-area: Recurring-Label; }
    .Recurring-Button { grid-area: Recurring-Button; }
    .Description { grid-area: Description; }
    .Sun { grid-area: Sun; }
    .Mon { grid-area: Mon; }
    .Tues { grid-area: Tues; }
    .Wed { grid-area: Wed; }
    .Thurs { grid-area: Thurs; }
    .Fri { grid-area: Fri; }
    .Sat { grid-area: Sat; }
    .sunLabel { grid-area: sunLabel; }
    .monLabel { grid-area: monLabel; }
    .tueLabel { grid-area: tueLabel; }
    .wedLabel { grid-area: wedLabel; }
    .thurLabel { grid-area: thurLabel; }
    .friLabel { grid-area: friLabel; }
    .satLabel { grid-area: satLabel; }
    .Beginning-Date { grid-area: Beginning-Date;}
    .StartLabel { grid-area: StartLabel; }
    .EndLabel { grid-area: EndLabel; }
    .Ending-Date { grid-area: Ending-Date; }
    .startTimeLabel { grid-area: startTimeLabel; }
    .startTime { grid-area: startTime; }
    .endTimeLabel { grid-area: endTimeLabel; }
    .endTime { grid-area: endTime; }
    .insertRecButton { grid-area: insertRecButton; }

    .insert-section label {
      font-weight: bold;
      display: block; /* Display the label as a block element to put it on top */
      padding-bottom: 1em;
    }.recurring-section label {
      font-weight: bold;
      display: block; /* Display the label as a block element to put it on top */
      padding-bottom: 1em;
    }
     .fifteen{
       padding-top: 10%;
       padding-bottom: 10%;
     }
    .input-grid {
      display: grid;
      grid-template-columns: 1fr 1fr; /* Create a 2x2 grid */
      gap: 5px; /* Add spacing between input fields */
    }
    .input-grid input {
      margin: 5px;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }
    .insert-section button {
      margin-top: 1em;
      padding: 5px 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }
    .recurring-container button {
      margin-top: 1em;
      padding: 5px 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }
    .insert-section button:hover {
      background-color: #0056b3;
    }
    .recurring-container button:hover {
      background-color: #0056b3;
    }

    /* Media Queries */
    @media (max-width: 768px) {
      .calendar-container {
        padding: 10px;
      }
      .calendar {
        padding: 10px;
      }
      .insert-section {
        width: 100%;
        margin-left: 0;
      }
      .recurring-container {
        width: 100%;
        margin-left: 15%;
      }
      .shift{
        padding-left: 10%;
      }
    }
  </style>
</head>
<body>
<div class="calendar-container">
  <div class="calendar">
    <div style="display: flex; justify-content: center">
      <a class="coleView" onclick="onLoad('Cole')">Cole View</a>
      <a class="sharedView" style="padding-right: 1em; padding-left: 1em" onclick="onLoad('Shared')">Shared View</a>
      <a class="twoView" onclick="onLoad('Two')" >Two View</a>
    </div>
  <h1 class="title">24-Hour Weekly Calendar</h1>
  <table>
    <thead>
    <tr>
      <th>Time</th>
      <th id="sunday"></th>
      <th id="monday"></th>
      <th id="tuesday"></th>
      <th id="wednesday"></th>
      <th id="thursday"></th>
      <th id="friday"></th>
      <th id="saturday"></th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td class="time-cell">12:00 AM</td>
      <td class="0000 day0"></td>
      <td class="0000 day1"></td>
      <td class="0000 day2"></td>
      <td class="0000 day3"></td>
      <td class="0000 day4"></td>
      <td class="0000 day5"></td>
      <td class="0000 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">12:30 AM</td>
      <td class="0030 day0"></td>
      <td class="0030 day1"></td>
      <td class="0030 day2"></td>
      <td class="0030 day3"></td>
      <td class="0030 day4"></td>
      <td class="0030 day5"></td>
      <td class="0030 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">01:00 AM</td>
      <td class="0100 day0"></td>
      <td class="0100 day1"></td>
      <td class="0100 day2"></td>
      <td class="0100 day3"></td>
      <td class="0100 day4"></td>
      <td class="0100 day5"></td>
      <td class="0100 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">01:30 AM</td>
      <td class="0130 day0"></td>
      <td class="0130 day1"></td>
      <td class="0130 day2"></td>
      <td class="0130 day3"></td>
      <td class="0130 day4"></td>
      <td class="0130 day5"></td>
      <td class="0130 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">02:00 AM</td>
      <td class="0200 day0"></td>
      <td class="0200 day1"></td>
      <td class="0200 day2"></td>
      <td class="0200 day3"></td>
      <td class="0200 day4"></td>
      <td class="0200 day5"></td>
      <td class="0200 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">02:30 AM</td>
      <td class="0230 day0"></td>
      <td class="0230 day1"></td>
      <td class="0230 day2"></td>
      <td class="0230 day3"></td>
      <td class="0230 day4"></td>
      <td class="0230 day5"></td>
      <td class="0230 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">03:00 AM</td>
      <td class="0300 day0"></td>
      <td class="0300 day1"></td>
      <td class="0300 day2"></td>
      <td class="0300 day3"></td>
      <td class="0300 day4"></td>
      <td class="0300 day5"></td>
      <td class="0300 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">03:30 AM</td>
      <td class="0330 day0"></td>
      <td class="0330 day1"></td>
      <td class="0330 day2"></td>
      <td class="0330 day3"></td>
      <td class="0330 day4"></td>
      <td class="0330 day5"></td>
      <td class="0330 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">04:00 AM</td>
      <td class="0400 day0"></td>
      <td class="0400 day1"></td>
      <td class="0400 day2"></td>
      <td class="0400 day3"></td>
      <td class="0400 day4"></td>
      <td class="0400 day5"></td>
      <td class="0400 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">04:30 AM</td>
      <td class="0430 day0"></td>
      <td class="0430 day1"></td>
      <td class="0430 day2"></td>
      <td class="0430 day3"></td>
      <td class="0430 day4"></td>
      <td class="0430 day5"></td>
      <td class="0430 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">05:00 AM</td>
      <td class="0500 day0"></td>
      <td class="0500 day1"></td>
      <td class="0500 day2"></td>
      <td class="0500 day3"></td>
      <td class="0500 day4"></td>
      <td class="0500 day5"></td>
      <td class="0500 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">05:30 AM</td>
      <td class="0530 day0"></td>
      <td class="0530 day1"></td>
      <td class="0530 day2"></td>
      <td class="0530 day3"></td>
      <td class="0530 day4"></td>
      <td class="0530 day5"></td>
      <td class="0530 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">06:00 AM</td>
      <td class="0600 day0"></td>
      <td class="0600 day1"></td>
      <td class="0600 day2"></td>
      <td class="0600 day3"></td>
      <td class="0600 day4"></td>
      <td class="0600 day5"></td>
      <td class="0600 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">06:30 AM</td>
      <td class="0630 day0"></td>
      <td class="0630 day1"></td>
      <td class="0630 day2"></td>
      <td class="0630 day3"></td>
      <td class="0630 day4"></td>
      <td class="0630 day5"></td>
      <td class="0630 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">07:00 AM</td>
      <td class="0700 day0"></td>
      <td class="0700 day1"></td>
      <td class="0700 day2"></td>
      <td class="0700 day3"></td>
      <td class="0700 day4"></td>
      <td class="0700 day5"></td>
      <td class="0700 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">07:30 AM</td>
      <td class="0730 day0"></td>
      <td class="0730 day1"></td>
      <td class="0730 day2"></td>
      <td class="0730 day3"></td>
      <td class="0730 day4"></td>
      <td class="0730 day5"></td>
      <td class="0730 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">08:00 AM</td>
      <td class="0800 day0"></td>
      <td class="0800 day1"></td>
      <td class="0800 day2"></td>
      <td class="0800 day3"></td>
      <td class="0800 day4"></td>
      <td class="0800 day5"></td>
      <td class="0800 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">08:30 AM</td>
      <td class="0830 day0"></td>
      <td class="0830 day1"></td>
      <td class="0830 day2"></td>
      <td class="0830 day3"></td>
      <td class="0830 day4"></td>
      <td class="0830 day5"></td>
      <td class="0830 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">09:00 AM</td>
      <td class="0900 day0"></td>
      <td class="0900 day1"></td>
      <td class="0900 day2"></td>
      <td class="0900 day3"></td>
      <td class="0900 day4"></td>
      <td class="0900 day5"></td>
      <td class="0900 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">09:30 AM</td>
      <td class="0930 day0"></td>
      <td class="0930 day1"></td>
      <td class="0930 day2"></td>
      <td class="0930 day3"></td>
      <td class="0930 day4"></td>
      <td class="0930 day5"></td>
      <td class="0930 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">10:00 AM</td>
      <td class="1000 day0"></td>
      <td class="1000 day1"></td>
      <td class="1000 day2"></td>
      <td class="1000 day3"></td>
      <td class="1000 day4"></td>
      <td class="1000 day5"></td>
      <td class="1000 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">10:30 AM</td>
      <td class="1030 day0"></td>
      <td class="1030 day1"></td>
      <td class="1030 day2"></td>
      <td class="1030 day3"></td>
      <td class="1030 day4"></td>
      <td class="1030 day5"></td>
      <td class="1030 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">11:00 AM</td>
      <td class="1100 day0"></td>
      <td class="1100 day1"></td>
      <td class="1100 day2"></td>
      <td class="1100 day3"></td>
      <td class="1100 day4"></td>
      <td class="1100 day5"></td>
      <td class="1100 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">11:30 AM</td>
      <td class="1130 day0"></td>
      <td class="1130 day1"></td>
      <td class="1130 day2"></td>
      <td class="1130 day3"></td>
      <td class="1130 day4"></td>
      <td class="1130 day5"></td>
      <td class="1130 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">12:00 PM</td>
      <td class="1200 day0"></td>
      <td class="1200 day1"></td>
      <td class="1200 day2"></td>
      <td class="1200 day3"></td>
      <td class="1200 day4"></td>
      <td class="1200 day5"></td>
      <td class="1200 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">12:30 PM</td>
      <td class="1230 day0"></td>
      <td class="1230 day1"></td>
      <td class="1230 day2"></td>
      <td class="1230 day3"></td>
      <td class="1230 day4"></td>
      <td class="1230 day5"></td>
      <td class="1230 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">01:00 PM</td>
      <td class="1300 day0"></td>
      <td class="1300 day1"></td>
      <td class="1300 day2"></td>
      <td class="1300 day3"></td>
      <td class="1300 day4"></td>
      <td class="1300 day5"></td>
      <td class="1300 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">01:30 PM</td>
      <td class="1330 day0"></td>
      <td class="1330 day1"></td>
      <td class="1330 day2"></td>
      <td class="1330 day3"></td>
      <td class="1330 day4"></td>
      <td class="1330 day5"></td>
      <td class="1330 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">02:00 PM</td>
      <td class="1400 day0"></td>
      <td class="1400 day1"></td>
      <td class="1400 day2"></td>
      <td class="1400 day3"></td>
      <td class="1400 day4"></td>
      <td class="1400 day5"></td>
      <td class="1400 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">02:30 PM</td>
      <td class="1430 day0"></td>
      <td class="1430 day1"></td>
      <td class="1430 day2"></td>
      <td class="1430 day3"></td>
      <td class="1430 day4"></td>
      <td class="1430 day5"></td>
      <td class="1430 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">03:00 PM</td>
      <td class="1500 day0"></td>
      <td class="1500 day1"></td>
      <td class="1500 day2"></td>
      <td class="1500 day3"></td>
      <td class="1500 day4"></td>
      <td class="1500 day5"></td>
      <td class="1500 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">03:30 PM</td>
      <td class="1530 day0"></td>
      <td class="1530 day1"></td>
      <td class="1530 day2"></td>
      <td class="1530 day3"></td>
      <td class="1530 day4"></td>
      <td class="1530 day5"></td>
      <td class="1530 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">04:00 PM</td>
      <td class="1600 day0"></td>
      <td class="1600 day1"></td>
      <td class="1600 day2"></td>
      <td class="1600 day3"></td>
      <td class="1600 day4"></td>
      <td class="1600 day5"></td>
      <td class="1600 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">04:30 PM</td>
      <td class="1630 day0"></td>
      <td class="1630 day1"></td>
      <td class="1630 day2"></td>
      <td class="1630 day3"></td>
      <td class="1630 day4"></td>
      <td class="1630 day5"></td>
      <td class="1630 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">05:00 PM</td>
      <td class="1700 day0"></td>
      <td class="1700 day1"></td>
      <td class="1700 day2"></td>
      <td class="1700 day3"></td>
      <td class="1700 day4"></td>
      <td class="1700 day5"></td>
      <td class="1700 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">05:30 PM</td>
      <td class="1730 day0"></td>
      <td class="1730 day1"></td>
      <td class="1730 day2"></td>
      <td class="1730 day3"></td>
      <td class="1730 day4"></td>
      <td class="1730 day5"></td>
      <td class="1730 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">06:00 PM</td>
      <td class="1800 day0"></td>
      <td class="1800 day1"></td>
      <td class="1800 day2"></td>
      <td class="1800 day3"></td>
      <td class="1800 day4"></td>
      <td class="1800 day5"></td>
      <td class="1800 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">06:30 PM</td>
      <td class="1830 day0"></td>
      <td class="1830 day1"></td>
      <td class="1830 day2"></td>
      <td class="1830 day3"></td>
      <td class="1830 day4"></td>
      <td class="1830 day5"></td>
      <td class="1830 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">07:00 PM</td>
      <td class="1900 day0"></td>
      <td class="1900 day1"></td>
      <td class="1900 day2"></td>
      <td class="1900 day3"></td>
      <td class="1900 day4"></td>
      <td class="1900 day5"></td>
      <td class="1900 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">07:30 PM</td>
      <td class="1930 day0"></td>
      <td class="1930 day1"></td>
      <td class="1930 day2"></td>
      <td class="1930 day3"></td>
      <td class="1930 day4"></td>
      <td class="1930 day5"></td>
      <td class="1930 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">08:00 PM</td>
      <td class="2000 day0"></td>
      <td class="2000 day1"></td>
      <td class="2000 day2"></td>
      <td class="2000 day3"></td>
      <td class="2000 day4"></td>
      <td class="2000 day5"></td>
      <td class="2000 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">08:30 PM</td>
      <td class="2030 day0"></td>
      <td class="2030 day1"></td>
      <td class="2030 day2"></td>
      <td class="2030 day3"></td>
      <td class="2030 day4"></td>
      <td class="2030 day5"></td>
      <td class="2030 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">09:00 PM</td>
      <td class="2100 day0"></td>
      <td class="2100 day1"></td>
      <td class="2100 day2"></td>
      <td class="2100 day3"></td>
      <td class="2100 day4"></td>
      <td class="2100 day5"></td>
      <td class="2100 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">09:30 PM</td>
      <td class="2130 day0"></td>
      <td class="2130 day1"></td>
      <td class="2130 day2"></td>
      <td class="2130 day3"></td>
      <td class="2130 day4"></td>
      <td class="2130 day5"></td>
      <td class="2130 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">10:00 PM</td>
      <td class="2200 day0"></td>
      <td class="2200 day1"></td>
      <td class="2200 day2"></td>
      <td class="2200 day3"></td>
      <td class="2200 day4"></td>
      <td class="2200 day5"></td>
      <td class="2200 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">10:30 PM</td>
      <td class="2230 day0"></td>
      <td class="2230 day1"></td>
      <td class="2230 day2"></td>
      <td class="2230 day3"></td>
      <td class="2230 day4"></td>
      <td class="2230 day5"></td>
      <td class="2230 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">11:00 PM</td>
      <td class="2300 day0"></td>
      <td class="2300 day1"></td>
      <td class="2300 day2"></td>
      <td class="2300 day3"></td>
      <td class="2300 day4"></td>
      <td class="2300 day5"></td>
      <td class="2300 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">11:30 PM</td>
      <td class="2330 day0"></td>
      <td class="2330 day1"></td>
      <td class="2330 day2"></td>
      <td class="2330 day3"></td>
      <td class="2330 day4"></td>
      <td class="2330 day5"></td>
      <td class="2330 day6"></td>
    </tr>
    </tbody>
  </table>
  </div>
  <div class="insert-section">
    <label >INSERT:</label>
    <div class="input-grid">
      <input type="date" id="date" placeholder="Date">
      <select id="start"></select>
      <select id="end"></select>
      <input type="text" id="description" placeholder="Description">
    </div>
    <button id="insertButton">Insert</button>
  </div>
  <div class="recurring-container">
    <div class="Recurring-Label fifteen shift" style="display: flex; align-items: center; justify-content: center">
      <label>RECURRING?</label>
    </div>
    <div class="Recurring-Button fifteen shift" style="align-items: center; display: flex; justify-content: right;">
      <input type="checkbox" id="recurring" name="recurring" value="recurring">
    </div>
    <div class="Description fifteen shift">
      <input type="text" id="description2" placeholder="Description">
    </div>
    <div class="Sun fifteen shift">
      <!--Add a check box inside each of the days of the week -->
        <input type="checkbox" id="sunday2" name="sunday2" value="sunday2">
    </div>
    <div class="Mon fifteen shift">
        <input type="checkbox" id="monday2" name="monday2" value="monday2">
    </div>
    <div class="Tues fifteen shift">
        <input type="checkbox" id="tuesday2" name="tuesday2" value="tuesday2">
    </div>
    <div class="Wed fifteen shift">
        <input type="checkbox" id="wednesday2" name="wednesday2" value="wednesday2">
    </div>
    <div class="Thurs fifteen shift">
        <input type="checkbox" id="thursday2" name="thursday2" value="thursday2">
    </div>
    <div class="Fri fifteen shift">
        <input type="checkbox" id="friday2" name="friday2" value="friday2">
    </div>
    <div class="Sat fifteen shift">
        <input type="checkbox" id="saturday2" name="saturday2" value="saturday2">
    </div>
    <div class="sunLabel shift">
        <label>S</label>
    </div>
    <div class="monLabel shift">
        <label>M</label>
    </div>
    <div class="tueLabel shift">
        <label>T</label>
    </div>
    <div class="wedLabel shift">
        <label>W</label>
    </div>
    <div class="thurLabel shift">
        <label>T</label>
    </div>
    <div class="friLabel shift">
        <label>F</label>
    </div>
    <div class="satLabel shift">
        <label>S</label>
    </div>
    <div class="StartLabel fifteen shift">
        <label>Start Date:</label>
    </div>
    <div class="Beginning-Date fifteen shift">
      <input id="start2" type="date"></input>
    </div>
    <div class="EndLabel fifteen shift">
        <label>End Date:</label>
    </div>
    <div class="Ending-Date fifteen shift">
      <input id="end2" type="date"></input>
    </div>
    <div class="startTimeLabel fifteen shift">
        <label>Start Time:</label>
    </div>
    <div class="startTime fifteen shift">
      <select id="startTime2"></select>
    </div>
    <div class="endTimeLabel fifteen shift">
        <label>End Time:</label>
    </div>
    <div class="endTime fifteen shift">
        <select id="endTime2"></select>
    </div>
    <div class="insertRecButton">
      <button id="insertRecButton">Insert</button>
    </div>
  </div>
</div>
</body>
<script>
  //TODO: Save which user is logged in, maybe a table for it? or just a variable if feeling lazy. prob session storage for user

  // Define the daysOfWeek and months arrays globally
  const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
  const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

  // Function to get the current date in the format "Sunday September 10"
  function getCurrentDate(offset) {
    const now = new Date();
    now.setDate(now.getDate() + offset); // Adjust for each day of the week
    const dayOfWeek = daysOfWeek[now.getDay()];
    const month = months[now.getMonth()];
    const day = now.getDate();
    return `${dayOfWeek} ${month} ${day}`;
  }

  // Populate the <th> elements with the dates for each day of the week
  for (let i = 0; i < 7; i++) {
    document.getElementById(daysOfWeek[i].toLowerCase()).textContent = getCurrentDate(i);
  }

  //Function to query database for events for a given day and the next 6 days
  async function onLoad(user) {
    //start by clearing the table
    var elements = document.getElementsByClassName("populated");
    for (let i = 0; i<elements.length; i++) {
      elements[i].removeEventListener("click", delete2);
    }
    for (let i = elements.length-1; i >= 0; i--) {
      elements[i].innerHTML = "";
      elements[i].style.backgroundColor = "";
      elements[i].classList.remove("populated")
    }
    try {
      // Calculate the start date and end date for the 7-day range
      let startDate = new Date().toLocaleString("en-US", {timeZone: "America/New_York"})
      startDate = startDate.substring(0, 10);
      startDate=daysBetween(startDate)
      let endDate = startDate+6;

      const data = await $.ajax({
        contentType: "application/json",
        url: "http://nodejs-production-d97d.up.railway.app/getEventsRange",
        type: 'GET',
        data: {
          startDate: startDate,
          endDate: endDate,
          user: user
        }
      });

      var events = data.events;
      //print all events returned

      if (events && Array.isArray(events)) {
        // Iterate over the 7 days
        for (let dayOffset = 0; dayOffset < 7; dayOffset++) {
          let currentDate = startDate
          currentDate = currentDate + dayOffset;

          // Filter events for the current day
          const eventsForCurrentDay = events.filter(event => {
            const eventDate = event.date
            return eventDate === currentDate;
          });

          eventsForCurrentDay.forEach(event => {
            var day = event.date - daysBetween(new Date) +1; //I HAVE NO FUCKING CLUE WHY BUT DO NOT TOUCH THIS +1
            var user = event.user;
            var time = event.time.toString();
            var dayClass = "day" + day;
            var timeClass;
            if (time.length === 1) {
              timeClass = "000" + time;
            } else if (time.length === 2) {
              timeClass = "00" + time;
            } else if (time.length === 3) {
              timeClass = "0" + time;
            } else {
              timeClass = time;
            }
            var classString = timeClass + " " + dayClass;

            // Change the background color of <td> elements with the classString to blue
            var elements = document.getElementsByClassName(classString);
            for (let i = 0; i < elements.length; i++) {
              elements[i].innerHTML = event.description;
              elements[i].style.backgroundColor = "blue";
              elements[i].classList.add("populated")
            }
          });
        }
        /**
         * Create an alert with 2 options when a populated <td> element is clicked: options Confirm or Cancel
         * If Confirm is clicked, delete the event from the database and call onLoad() to refresh the table
         */
        var populatedElements = document.getElementsByClassName("populated");
        for (let i = 0; i < populatedElements.length; i++) {
          populatedElements[i].addEventListener("click", delete2);
        }


      } else {
        console.log("No events data received.");
      }
    } catch (err) {
      alert(err.message);
    }
  }

  function passwordCheck() {
    if(sessionStorage.getItem("user")!==null){
        document.getElementsByClassName("title")[0].style.color="blue";
        onLoad(sessionStorage.getItem("user"));
        return;
    }
    var pass = prompt("Please enter the password.");
    $.ajax({
      contentType: "application/json",
      url: "http://nodejs-production-d97d.up.railway.app/login",
      type: 'GET',
      data: { password: pass }, // Send password as a query parameter
      success: function(data) {
        if (data === "No password found") {
          alert("No user found or incorrect password!");
          passwordCheck(); // Prompt again if the password is incorrect
        } else if (data === "Error") {
          alert("Error");
          passwordCheck(); // Prompt again in case of an error
        } else {
          sessionStorage.setItem("user", data); // Save the user in session storage
          document.getElementsByClassName("title")[0].style.color="blue";
          onLoad(sessionStorage.getItem("user"));
        }
      },
      error: function(err) {
        alert(err);
        onLoad(sessionStorage.getItem("user"));
      }
    });
  }
  window.onload=passwordCheck;
  // Get a reference to the recurringButton checkbox and the elements in the recurring-container
  const recurringButton = document.getElementById("recurring");
  const recurringContainerElements = document.querySelectorAll(".recurring-container input, .recurring-container select");
  const insertSectionElements = document.querySelectorAll(".insert-section input, .insert-section select");

  // Disable and grey out the elements inside the recurring-container
  for (const element of recurringContainerElements) {
    element.disabled = true;
    element.style.opacity = 0.5; // You can adjust the opacity to your preference
  }
  document.getElementById("recurring").style.opacity = 1;
  document.getElementById("recurring").disabled = false;
  document.getElementById("insertRecButton").disabled = true;
  document.getElementById("insertRecButton").style.opacity = 0.5;
  document.getElementById("insertRecButton").style.pointerEvents = "none";


  // Add an event listener to the recurringButton checkbox to handle enabling/disabling
  recurringButton.addEventListener("change", function () {
    // Enable or disable the recurring-container elements based on the checkbox state
    const isEnabled = recurringButton.checked;

    for (const element of recurringContainerElements) {
      element.disabled = !isEnabled;
      element.style.opacity = isEnabled ? 1 : 0.5; // Adjust opacity based on the checkbox state
    }
    for (const element of insertSectionElements) {
      element.disabled = isEnabled;
      element.style.opacity = isEnabled ? 0.5 : 1; // Adjust opacity based on the checkbox state
    }
    document.getElementById("insertButton").disabled = isEnabled;
    document.getElementById("insertButton").style.opacity = isEnabled ? 0.5 : 1;
    document.getElementById("insertButton").style.pointerEvents = isEnabled ? "none" : "auto";
    document.getElementById("insertRecButton").disabled = !isEnabled;
    document.getElementById("insertRecButton").style.opacity = !isEnabled ? 0.5 : 1;
    document.getElementById("insertRecButton").style.pointerEvents = !isEnabled ? "none" : "auto";
    document.getElementById("recurring").style.opacity = 1;
    document.getElementById("recurring").disabled = false;
  });



  function daysBetween(date) {
    var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
    var firstDate = new Date(2023,0,1);
    var secondDate = new Date(date);
    return Math.round(Math.abs((secondDate.getTime() - firstDate.getTime())/(oneDay)));
  }
  function delete2() {
    var confirmDelete = confirm("Are you sure you want to delete this event?");
    const populatedElements = document.getElementsByClassName("populated");
    if (confirmDelete) {
      var eventToDeleteDescription = this.innerHTML;
      var eventToDeleteDay=daysBetween(new Date)-1 +parseInt(this.classList[1].substring(3));
      var promises = [];

      for (let j = 0; j < populatedElements.length; j++) {
        if (populatedElements[j].innerHTML === eventToDeleteDescription) {
          populatedElements[j].innerHTML = "";
            populatedElements[j].style.backgroundColor = "";
            populatedElements[j].classList.add("toRemove")
          var eventToDeleteTime = populatedElements[j].classList[0];

          // Create a promise for each AJAX call
          var ajaxPromise = new Promise(function(resolve, reject) {
            $.ajax({
              contentType: "application/json",
              url: "http://nodejs-production-d97d.up.railway.app/delete",
              type: 'POST',
              data: JSON.stringify({
                time: eventToDeleteTime,
                description: eventToDeleteDescription,
                user: sessionStorage.getItem("user"),
                date: eventToDeleteDay
              }),
              success: function (data) {
                resolve(data); // Resolve the promise on success
              },
              error: function (err) {
                reject(err); // Reject the promise on error
              }
            });
          });

          promises.push(ajaxPromise);
        }
      }
      // Wait for all promises to be resolved
      Promise.all(promises)
              .then(function() {
                // All AJAX calls were successful
                var toRemoveElements = document.getElementsByClassName("toRemove");
                for (let i = toRemoveElements.length-1; i >= 0; i--) {
                    toRemoveElements[i].removeEventListener("click", delete2);
                }
                for (let i = toRemoveElements.length-1; i >= 0; i--) {
                  toRemoveElements[i].classList.remove("populated");
                  toRemoveElements[i].classList.remove("toRemove");
                }
                onLoad(sessionStorage.getItem("user"));
              })
              .catch(function(err) {
                // Handle errors here if needed
                console.error(err);
                onLoad(sessionStorage.getItem("user"));
              });
    }
  }

  // Function to format time in 12-hour format (UI)
  function format12Hour(hour, minute) {
    const period = hour < 12 ? 'AM' : 'PM';
    const formattedHour = hour % 12 || 12;
    const formattedMinute = minute < 10 ? `0${minute}` : minute;
    return `${formattedHour}:${formattedMinute} ${period}`;
  }

  // Function to format time in 24-hour format (data)
  function format24Hour(hour, minute) {
    const formattedHour = hour < 10 ? `0${hour}` : hour;
    const formattedMinute = minute < 10 ? `0${minute}` : minute;
    return `${formattedHour}${formattedMinute}`;
  }

  function populateStartDropdown() {
    const dropdown = document.getElementById('start');
    const rDropdown = document.getElementById('startTime2');

    for (let hour = 0; hour <= 23; hour++) {
      for (let minute = 0; minute <= 30; minute += 30) {
        const formatted12Hour = format12Hour(hour, minute);
        const formatted24Hour = format24Hour(hour, minute);

        const option = document.createElement('option');
        option.value = formatted24Hour; // Use 24-hour format for data
        option.text = formatted12Hour; // Use 12-hour format for UI
        dropdown.appendChild(option);
        const option2 = document.createElement('option');
        option2.value = formatted24Hour; // Use 24-hour format for data
        option2.text = formatted12Hour; // Use 12-hour format for UI
        rDropdown.appendChild(option2);
      }
    }
  }
  function populateEndDropdown() {
    const dropdown = document.getElementById('end');
    const rDropdown = document.getElementById('endTime2');

    for (let hour = 0; hour <= 23; hour++) {
      for (let minute = 0; minute <= 30; minute += 30) {
        if (hour === 0 && minute === 0) {
          continue;
        }
        const formatted12Hour = format12Hour(hour, minute);
        const formatted24Hour = format24Hour(hour, minute);

        const option = document.createElement('option');
        option.value = formatted24Hour; // Use 24-hour format for data
        option.text = formatted12Hour; // Use 12-hour format for UI
        dropdown.appendChild(option);
        const option2 = document.createElement('option');
        option2.value = formatted24Hour; // Use 24-hour format for data
        option2.text = formatted12Hour; // Use 12-hour format for UI
        rDropdown.appendChild(option2);
      }
    }
    const option = document.createElement('option');
    option.value = "2400";
    option.text = "Midnight";
    dropdown.appendChild(option);
    const option2 = document.createElement('option');
    option2.value = "2400";
    option2.text = "Midnight";
    rDropdown.appendChild(option2);
  }

  // Call the function to populate the time dropdown
  populateStartDropdown();
  populateEndDropdown();
//create function to return the number of days between a January 1, 2023 and a date
    function getDays(date) {
        var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
        var firstDate = new Date(2023,0,1);
        var secondDate = new Date(date);
        return Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
    }
  $('#insertButton').click(function(){
    //if date is empty alert and return without making the ajax call
    if(document.getElementById("date").value === ""){
        alert("Please enter a date");
        return;
    }
    //if end time is <= starttime alert and return without making the ajax call
    if(document.getElementById("end").value <= document.getElementById("start").value){
        alert("End time must be after start time");
        return;
    }
    $.ajax({
      contentType: "application/json",
      url: "http://nodejs-production-d97d.up.railway.app/insert",
      type: 'POST',
      data: JSON.stringify({
        date : getDays(document.getElementById("date").value),
        start : document.getElementById("start").value,
        end : document.getElementById("end").value,
        description : document.getElementById("description").value,
        user : sessionStorage.getItem("user")
      }),
      success: function(data){
        alert(data.message)
        onLoad(sessionStorage.getItem("user"));
      },
      error: function(err){
        alert(err.message)
        onLoad(sessionStorage.getItem("user"));
      }
    });
  });
  $('#insertRecButton').click(function (){
      if(document.getElementById("start2").value === ""||document.getElementById("end2").value === ""){
          alert("Please enter a starting and ending date");
          return;
      }
      else if(document.getElementById("end2").value <= document.getElementById("start2").value){
           alert("End date must be after start date");
           return;
      }
      else if (document.getElementById("endTime2").value <= document.getElementById("startTime2").value){
          alert("End time must be after start time");
          return;
      }
        var days = [];
        days.length = 0;
        if(document.getElementById("sunday2").checked){
            days.push(0);
        }
        if(document.getElementById("monday2").checked){
            days.push(1);
        }
        if(document.getElementById("tuesday2").checked){
            days.push(2);
        }
        if(document.getElementById("wednesday2").checked){
            days.push(3);
        }
        if(document.getElementById("thursday2").checked){
            days.push(4);
        }
        if(document.getElementById("friday2").checked){
            days.push(5);
        }
        if(document.getElementById("saturday2").checked){
            days.push(6);
        }
        if(days.length === 0){
            alert("Please select at least one day of the week");
            return;
        }
        var startRange = getDays(document.getElementById("start2").value);
        var endRange = getDays(document.getElementById("end2").value);
        var start = document.getElementById("startTime2").value;
        var end = document.getElementById("endTime2").value;
        var description = document.getElementById("description2").value;
        var user;
        //determine which day of the week the start date is
      var daysToInsert = [];
      daysToInsert.length=0;
        for (var i=startRange; i<=endRange; i++) {
          if (days.includes(i % 7)) {
            daysToInsert.push(i);
          }
        }
      $.ajax({
        contentType: "application/json",
        url: "http://nodejs-production-d97d.up.railway.app/insertRec",
        type: 'POST',
        data: JSON.stringify({
          days : daysToInsert,
          start : start,
          end : end,
          description : description,
          user : sessionStorage.getItem("user")
        }),
        success: function(data){
          if(data.message == 0) {
            alert("Successfully inserted all calendar events.")
          }
          else if(data.message == daysToInsert.length){
            alert("No calendar events were inserted. (Likely due to a timeslot overlap.)")
          }
          else {
            alert("Successfully inserted " + ((daysToInsert.length)-parseInt(data.message)) + " of " + daysToInsert.length + " calendar events. (Failed insertions are likely due to a timeslot overlap.)")
          }
          onLoad(sessionStorage.getItem("user"));
        },
        error: function(err){
          alert(err.message)
          onLoad(sessionStorage.getItem("user"));
        }
      });
    });
  function login(pass){
    $.ajax({
      contentType: "application/json",
      url: "http://nodejs-production-d97d.up.railway.app/login",
      type: 'GET',
      data: { password: pass }, // Send password as a query parameter
      success: function(data){
        //data is either "{user}" or "No password found" or "Error"(internal server error)
        if(data === "No password found") {
          alert("No user found or incorrect password!");
        } else if (data === "Error") {
          alert("Error");
        } else {
          alert("Logged in as " + data);
        }
        alert(data)
        onLoad(sessionStorage.getItem("user"));
      },
      error: function(err){
        alert(err)
        onLoad(sessionStorage.getItem("user"));
      }
    });
  }
  //create a function to call getDays on January 1, 2023
  function getDays2(date) {
    console.log( getDays( new Date(2023,0,1)));
  }
</script>
</html>