<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>24-Hour Weekly Calendar</title>
  <style>
    /* You can also include inline CSS styles here */
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 0;
    }
    .calendar-container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background-color: #fff;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      overflow: auto; /* Add overflow property to contain floated elements */
    }
    .calendar {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
      background: transparent;
    }
    table {
      width: 100%;
      background: transparent;
      border-collapse: collapse;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 10px;
      text-align: center;
    }
    th {
      background-color: #333;
      color: #fff;
    }
    th, td {
      font-size: 16px;
    }
    td:hover {
      background-color: #f0f0f0;
    }
    .time-cell {
      font-weight: bold;
    }
    .title {
      text-align: center;
    }
    .insert-section {
      text-align: center;
      width: 50%;
      padding: 15px; /* Add padding to the insert section */
      padding-left: 0px;
      margin-left: 25%;
    }

    .insert-section label {
      font-weight: bold;
      display: block; /* Display the label as a block element to put it on top */
      padding-bottom: 1em;
    }

    .input-grid {
      display: grid;
      grid-template-columns: 1fr 1fr; /* Create a 2x2 grid */
      gap: 5px; /* Add spacing between input fields */
    }

    .input-grid input {
      margin: 5px;
      padding: 5px;
      border: 1px solid #ccc;
      border-radius: 3px;
    }

    .insert-section button {
      margin-top: 1em;
      padding: 5px 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      border-radius: 3px;
      cursor: pointer;
    }

    .insert-section button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
<div class="calendar-container">
  <div class="calendar">
  <h1 class="title">24-Hour Weekly Calendar</h1>
  <table>
    <thead>
    <tr>
      <th>Time</th>
      <th id="sunday"></th>
      <th id="monday"></th>
      <th id="tuesday"></th>
      <th id="wednesday"></th>
      <th id="thursday"></th>
      <th id="friday"></th>
      <th id="saturday"></th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <td class="time-cell">12:00 AM</td>
      <td class="0000 day0"></td>
      <td class="0000 day1"></td>
      <td class="0000 day2"></td>
      <td class="0000 day3"></td>
      <td class="0000 day4"></td>
      <td class="0000 day5"></td>
      <td class="0000 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">12:30 AM</td>
      <td class="0030 day0"></td>
      <td class="0030 day1"></td>
      <td class="0030 day2"></td>
      <td class="0030 day3"></td>
      <td class="0030 day4"></td>
      <td class="0030 day5"></td>
      <td class="0030 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">01:00 AM</td>
      <td class="0100 day0"></td>
      <td class="0100 day1"></td>
      <td class="0100 day2"></td>
      <td class="0100 day3"></td>
      <td class="0100 day4"></td>
      <td class="0100 day5"></td>
      <td class="0100 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">01:30 AM</td>
      <td class="0130 day0"></td>
      <td class="0130 day1"></td>
      <td class="0130 day2"></td>
      <td class="0130 day3"></td>
      <td class="0130 day4"></td>
      <td class="0130 day5"></td>
      <td class="0130 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">02:00 AM</td>
      <td class="0200 day0"></td>
      <td class="0200 day1"></td>
      <td class="0200 day2"></td>
      <td class="0200 day3"></td>
      <td class="0200 day4"></td>
      <td class="0200 day5"></td>
      <td class="0200 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">02:30 AM</td>
      <td class="0230 day0"></td>
      <td class="0230 day1"></td>
      <td class="0230 day2"></td>
      <td class="0230 day3"></td>
      <td class="0230 day4"></td>
      <td class="0230 day5"></td>
      <td class="0230 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">03:00 AM</td>
      <td class="0300 day0"></td>
      <td class="0300 day1"></td>
      <td class="0300 day2"></td>
      <td class="0300 day3"></td>
      <td class="0300 day4"></td>
      <td class="0300 day5"></td>
      <td class="0300 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">03:30 AM</td>
      <td class="0330 day0"></td>
      <td class="0330 day1"></td>
      <td class="0330 day2"></td>
      <td class="0330 day3"></td>
      <td class="0330 day4"></td>
      <td class="0330 day5"></td>
      <td class="0330 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">04:00 AM</td>
      <td class="0400 day0"></td>
      <td class="0400 day1"></td>
      <td class="0400 day2"></td>
      <td class="0400 day3"></td>
      <td class="0400 day4"></td>
      <td class="0400 day5"></td>
      <td class="0400 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">04:30 AM</td>
      <td class="0430 day0"></td>
      <td class="0430 day1"></td>
      <td class="0430 day2"></td>
      <td class="0430 day3"></td>
      <td class="0430 day4"></td>
      <td class="0430 day5"></td>
      <td class="0430 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">05:00 AM</td>
      <td class="0500 day0"></td>
      <td class="0500 day1"></td>
      <td class="0500 day2"></td>
      <td class="0500 day3"></td>
      <td class="0500 day4"></td>
      <td class="0500 day5"></td>
      <td class="0500 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">05:30 AM</td>
      <td class="0530 day0"></td>
      <td class="0530 day1"></td>
      <td class="0530 day2"></td>
      <td class="0530 day3"></td>
      <td class="0530 day4"></td>
      <td class="0530 day5"></td>
      <td class="0530 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">06:00 AM</td>
      <td class="0600 day0"></td>
      <td class="0600 day1"></td>
      <td class="0600 day2"></td>
      <td class="0600 day3"></td>
      <td class="0600 day4"></td>
      <td class="0600 day5"></td>
      <td class="0600 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">06:30 AM</td>
      <td class="0630 day0"></td>
      <td class="0630 day1"></td>
      <td class="0630 day2"></td>
      <td class="0630 day3"></td>
      <td class="0630 day4"></td>
      <td class="0630 day5"></td>
      <td class="0630 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">07:00 AM</td>
      <td class="0700 day0"></td>
      <td class="0700 day1"></td>
      <td class="0700 day2"></td>
      <td class="0700 day3"></td>
      <td class="0700 day4"></td>
      <td class="0700 day5"></td>
      <td class="0700 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">07:30 AM</td>
      <td class="0730 day0"></td>
      <td class="0730 day1"></td>
      <td class="0730 day2"></td>
      <td class="0730 day3"></td>
      <td class="0730 day4"></td>
      <td class="0730 day5"></td>
      <td class="0730 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">08:00 AM</td>
      <td class="0800 day0"></td>
      <td class="0800 day1"></td>
      <td class="0800 day2"></td>
      <td class="0800 day3"></td>
      <td class="0800 day4"></td>
      <td class="0800 day5"></td>
      <td class="0800 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">08:30 AM</td>
      <td class="0830 day0"></td>
      <td class="0830 day1"></td>
      <td class="0830 day2"></td>
      <td class="0830 day3"></td>
      <td class="0830 day4"></td>
      <td class="0830 day5"></td>
      <td class="0830 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">09:00 AM</td>
      <td class="0900 day0"></td>
      <td class="0900 day1"></td>
      <td class="0900 day2"></td>
      <td class="0900 day3"></td>
      <td class="0900 day4"></td>
      <td class="0900 day5"></td>
      <td class="0900 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">09:30 AM</td>
      <td class="0930 day0"></td>
      <td class="0930 day1"></td>
      <td class="0930 day2"></td>
      <td class="0930 day3"></td>
      <td class="0930 day4"></td>
      <td class="0930 day5"></td>
      <td class="0930 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">10:00 AM</td>
      <td class="1000 day0"></td>
      <td class="1000 day1"></td>
      <td class="1000 day2"></td>
      <td class="1000 day3"></td>
      <td class="1000 day4"></td>
      <td class="1000 day5"></td>
      <td class="1000 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">10:30 AM</td>
      <td class="1030 day0"></td>
      <td class="1030 day1"></td>
      <td class="1030 day2"></td>
      <td class="1030 day3"></td>
      <td class="1030 day4"></td>
      <td class="1030 day5"></td>
      <td class="1030 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">11:00 AM</td>
      <td class="1100 day0"></td>
      <td class="1100 day1"></td>
      <td class="1100 day2"></td>
      <td class="1100 day3"></td>
      <td class="1100 day4"></td>
      <td class="1100 day5"></td>
      <td class="1100 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">11:30 AM</td>
      <td class="1130 day0"></td>
      <td class="1130 day1"></td>
      <td class="1130 day2"></td>
      <td class="1130 day3"></td>
      <td class="1130 day4"></td>
      <td class="1130 day5"></td>
      <td class="1130 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">12:00 PM</td>
      <td class="1200 day0"></td>
      <td class="1200 day1"></td>
      <td class="1200 day2"></td>
      <td class="1200 day3"></td>
      <td class="1200 day4"></td>
      <td class="1200 day5"></td>
      <td class="1200 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">12:30 PM</td>
      <td class="1230 day0"></td>
      <td class="1230 day1"></td>
      <td class="1230 day2"></td>
      <td class="1230 day3"></td>
      <td class="1230 day4"></td>
      <td class="1230 day5"></td>
      <td class="1230 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">01:00 PM</td>
      <td class="1300 day0"></td>
      <td class="1300 day1"></td>
      <td class="1300 day2"></td>
      <td class="1300 day3"></td>
      <td class="1300 day4"></td>
      <td class="1300 day5"></td>
      <td class="1300 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">01:30 PM</td>
      <td class="1330 day0"></td>
      <td class="1330 day1"></td>
      <td class="1330 day2"></td>
      <td class="1330 day3"></td>
      <td class="1330 day4"></td>
      <td class="1330 day5"></td>
      <td class="1330 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">02:00 PM</td>
      <td class="1400 day0"></td>
      <td class="1400 day1"></td>
      <td class="1400 day2"></td>
      <td class="1400 day3"></td>
      <td class="1400 day4"></td>
      <td class="1400 day5"></td>
      <td class="1400 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">02:30 PM</td>
      <td class="1430 day0"></td>
      <td class="1430 day1"></td>
      <td class="1430 day2"></td>
      <td class="1430 day3"></td>
      <td class="1430 day4"></td>
      <td class="1430 day5"></td>
      <td class="1430 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">03:00 PM</td>
      <td class="1500 day0"></td>
      <td class="1500 day1"></td>
      <td class="1500 day2"></td>
      <td class="1500 day3"></td>
      <td class="1500 day4"></td>
      <td class="1500 day5"></td>
      <td class="1500 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">03:30 PM</td>
      <td class="1530 day0"></td>
      <td class="1530 day1"></td>
      <td class="1530 day2"></td>
      <td class="1530 day3"></td>
      <td class="1530 day4"></td>
      <td class="1530 day5"></td>
      <td class="1530 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">04:00 PM</td>
      <td class="1600 day0"></td>
      <td class="1600 day1"></td>
      <td class="1600 day2"></td>
      <td class="1600 day3"></td>
      <td class="1600 day4"></td>
      <td class="1600 day5"></td>
      <td class="1600 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">04:30 PM</td>
      <td class="1630 day0"></td>
      <td class="1630 day1"></td>
      <td class="1630 day2"></td>
      <td class="1630 day3"></td>
      <td class="1630 day4"></td>
      <td class="1630 day5"></td>
      <td class="1630 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">05:00 PM</td>
      <td class="1700 day0"></td>
      <td class="1700 day1"></td>
      <td class="1700 day2"></td>
      <td class="1700 day3"></td>
      <td class="1700 day4"></td>
      <td class="1700 day5"></td>
      <td class="1700 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">05:30 PM</td>
      <td class="1730 day0"></td>
      <td class="1730 day1"></td>
      <td class="1730 day2"></td>
      <td class="1730 day3"></td>
      <td class="1730 day4"></td>
      <td class="1730 day5"></td>
      <td class="1730 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">06:00 PM</td>
      <td class="1800 day0"></td>
      <td class="1800 day1"></td>
      <td class="1800 day2"></td>
      <td class="1800 day3"></td>
      <td class="1800 day4"></td>
      <td class="1800 day5"></td>
      <td class="1800 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">06:30 PM</td>
      <td class="1830 day0"></td>
      <td class="1830 day1"></td>
      <td class="1830 day2"></td>
      <td class="1830 day3"></td>
      <td class="1830 day4"></td>
      <td class="1830 day5"></td>
      <td class="1830 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">07:00 PM</td>
      <td class="1900 day0"></td>
      <td class="1900 day1"></td>
      <td class="1900 day2"></td>
      <td class="1900 day3"></td>
      <td class="1900 day4"></td>
      <td class="1900 day5"></td>
      <td class="1900 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">07:30 PM</td>
      <td class="1930 day0"></td>
      <td class="1930 day1"></td>
      <td class="1930 day2"></td>
      <td class="1930 day3"></td>
      <td class="1930 day4"></td>
      <td class="1930 day5"></td>
      <td class="1930 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">08:00 PM</td>
      <td class="2000 day0"></td>
      <td class="2000 day1"></td>
      <td class="2000 day2"></td>
      <td class="2000 day3"></td>
      <td class="2000 day4"></td>
      <td class="2000 day5"></td>
      <td class="2000 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">08:30 PM</td>
      <td class="2030 day0"></td>
      <td class="2030 day1"></td>
      <td class="2030 day2"></td>
      <td class="2030 day3"></td>
      <td class="2030 day4"></td>
      <td class="2030 day5"></td>
      <td class="2030 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">09:00 PM</td>
      <td class="2100 day0"></td>
      <td class="2100 day1"></td>
      <td class="2100 day2"></td>
      <td class="2100 day3"></td>
      <td class="2100 day4"></td>
      <td class="2100 day5"></td>
      <td class="2100 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">09:30 PM</td>
      <td class="2130 day0"></td>
      <td class="2130 day1"></td>
      <td class="2130 day2"></td>
      <td class="2130 day3"></td>
      <td class="2130 day4"></td>
      <td class="2130 day5"></td>
      <td class="2130 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">10:00 PM</td>
      <td class="2200 day0"></td>
      <td class="2200 day1"></td>
      <td class="2200 day2"></td>
      <td class="2200 day3"></td>
      <td class="2200 day4"></td>
      <td class="2200 day5"></td>
      <td class="2200 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">10:30 PM</td>
      <td class="2230 day0"></td>
      <td class="2230 day1"></td>
      <td class="2230 day2"></td>
      <td class="2230 day3"></td>
      <td class="2230 day4"></td>
      <td class="2230 day5"></td>
      <td class="2230 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">11:00 PM</td>
      <td class="2300 day0"></td>
      <td class="2300 day1"></td>
      <td class="2300 day2"></td>
      <td class="2300 day3"></td>
      <td class="2300 day4"></td>
      <td class="2300 day5"></td>
      <td class="2300 day6"></td>
    </tr>
    <tr>
      <td class="time-cell">11:30 PM</td>
      <td class="2330 day0"></td>
      <td class="2330 day1"></td>
      <td class="2330 day2"></td>
      <td class="2330 day3"></td>
      <td class="2330 day4"></td>
      <td class="2330 day5"></td>
      <td class="2330 day6"></td>
    </tr>
    </tbody>
  </table>
  </div>
  <div class="insert-section">
    <label >INSERT:</label>
    <div class="input-grid">
      <!--<input type="text" id="date" placeholder="Date">-->
      <input type="date" id="date" placeholder="Date">
      <select id="start"></select>
      <select id="end"></select>
      <input type="text" id="description" placeholder="Description">
    </div>
    <button id="insertButton">Insert</button>
  </div>
</div>
</body>
<script>
  //TODO: Onload, get table of events from database and populate table
  //TODO: Save which user is logged in, maybe a table for it? or just a variable if feeling lazy. prob session storage for user

  // Define the daysOfWeek and months arrays globally
  const daysOfWeek = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
  const months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

  // Function to get the current date in the format "Sunday September 10"
  function getCurrentDate(offset) {
    const now = new Date();
    now.setDate(now.getDate() + offset); // Adjust for each day of the week
    const dayOfWeek = daysOfWeek[now.getDay()];
    const month = months[now.getMonth()];
    const day = now.getDate();
    return `${dayOfWeek} ${month} ${day}`;
  }

  // Populate the <th> elements with the dates for each day of the week
  for (let i = 0; i < 7; i++) {
    document.getElementById(daysOfWeek[i].toLowerCase()).textContent = getCurrentDate(i);
  }
  /*var password;
  function passwordCheck() {
      while (password !== "123") {
        password = prompt("Please enter the password.");
      }
    document.getElementsByClassName("title")[0].style.color="blue";

      * Run for loop for each date in week range grabbing all events of the day
      * for each event returned, input into table
      *
  }
  window.onload=passwordCheck;*/

  function daysBetweenJanOne(date) {
    var firstDate = new Date(2023, 0, 1).toISOString().substring(0, 10);
    var secondDate = new Date(date).toISOString().substring(0, 10);
    return secondDate - firstDate;
  }

  //Function to query database for events for a given day and the next 6 days
  async function onLoad() {
    try {
      // Calculate the start date and end date for the 7-day range
      let startDate = new Date();
      console.log(startDate)
      startDate = startDate.toISOString()
      console.log(startDate)
      startDate = startDate.substring(0, 10);
      console.log(startDate)
      let endDate = new Date();
      endDate.setDate(startDate.getDate() + 6); // Add 6 days to the start date

      // Convert start and end dates to ISO date strings
      console.log(daysBetweenJanOne(startDate.toISOString().substring(0, 10)))
      console.log(daysBetweenJanOne(endDate.toISOString().substring(0, 10)))
      const startDateValue = daysBetweenJanOne(getDays(startDate.toISOString().substring(0, 10)));
      const endDateValue = daysBetweenJanOne(getDays(endDate.toISOString().substring(0, 10)));
      console.log(startDateValue);
      console.log(endDateValue);
      const data = await $.ajax({
        contentType: "application/json",
        url: "http://nodejs-production-d97d.up.railway.app/getEventsRange",
        type: 'GET',
        data: {
          startDate: startDateValue,
          endDate: endDateValue,
          user: "Cole"
        }
      });

      var events = data.events;

      if (events && Array.isArray(events)) {
        // Iterate over the 7 days
        for (let dayOffset = 0; dayOffset < 7; dayOffset++) {
          const currentDate = new Date(startDate);
          currentDate.setDate(currentDate.getDate() + dayOffset);

          // Filter events for the current day
          const eventsForCurrentDay = events.filter(event => {
            const eventDate = new Date(event.date);
            return eventDate.toISOString().substring(0, 10) === currentDate.toISOString().substring(0, 10);
          });

          // Display events for the current day
          eventsForCurrentDay.forEach(event => {
            var day = daysBetween(event.date);
            var user = event.user;
            var time = event.time.toString();
            var dayClass = "day" + day;
            var timeClass;
            if (time.length === 1) {
              timeClass = "000" + time;
            } else if (time.length === 2) {
              timeClass = "00" + time;
            } else if (time.length === 3) {
              timeClass = "0" + time;
            } else {
              timeClass = time;
            }
            var classString = timeClass + " " + dayClass;

            // Change the background color of <td> elements with the classString to blue
            var elements = document.getElementsByClassName(classString);
            for (let i = 0; i < elements.length; i++) {
              elements[i].style.backgroundColor = "blue";
            }
          });
        }
      } else {
        console.log("No events data received.");
      }
    } catch (err) {
      alert(err.message);
    }
  }

  //a function to calculate days between two dates


    function daysBetween(date) {
        var firstDate = getDays(new Date().toISOString().substring(0, 10));
        return date - firstDate;
    }

  function populateStartDropdown() {
    const dropdown = document.getElementById('start');

    for (let hour = 0; hour <= 23; hour++) {
      for (let minute = 0; minute <= 30; minute += 30) {
        const formatted12Hour = format12Hour(hour, minute);
        const formatted24Hour = format24Hour(hour, minute);

        const option = document.createElement('option');
        option.value = formatted24Hour; // Use 24-hour format for data
        option.text = formatted12Hour; // Use 12-hour format for UI
        dropdown.appendChild(option);
      }
    }
  }
  function populateEndDropdown() {
    const dropdown = document.getElementById('end');

    for (let hour = 0; hour <= 23; hour++) {
      for (let minute = 0; minute <= 30; minute += 30) {
        const formatted12Hour = format12Hour(hour, minute);
        const formatted24Hour = format24Hour(hour, minute);

        const option = document.createElement('option');
        option.value = formatted24Hour; // Use 24-hour format for data
        option.text = formatted12Hour; // Use 12-hour format for UI
        dropdown.appendChild(option);
      }
    }
  }

  // Function to format time in 12-hour format (UI)
  function format12Hour(hour, minute) {
    const period = hour < 12 ? 'AM' : 'PM';
    const formattedHour = hour % 12 || 12;
    const formattedMinute = minute < 10 ? `0${minute}` : minute;
    return `${formattedHour}:${formattedMinute} ${period}`;
  }

  // Function to format time in 24-hour format (data)
  function format24Hour(hour, minute) {
    const formattedHour = hour < 10 ? `0${hour}` : hour;
    const formattedMinute = minute < 10 ? `0${minute}` : minute;
    return `${formattedHour}${formattedMinute}`;
  }

  // Call the function to populate the time dropdown
  populateStartDropdown();
  populateEndDropdown();
//create function to return the number of days between a January 1, 2023 and a date
    function getDays(date) {
        var oneDay = 24*60*60*1000; // hours*minutes*seconds*milliseconds
        var firstDate = new Date(2023,0,1);
        var secondDate = new Date(date);
        var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
        return diffDays;
    }
  $('#insertButton').click(function(){
    $.ajax({
      contentType: "application/json",
      url: "http://nodejs-production-d97d.up.railway.app/insert",
      type: 'POST',
      data: JSON.stringify({
        date : getDays(document.getElementById("date").value),
        start : document.getElementById("start").value,
        end : document.getElementById("end").value,
        description : document.getElementById("description").value,
        user : "Cole"
      }),
      success: function(data){
        alert(data.message)
      },
      error: function(err){
        alert(err.message)
      }
    });
  });
</script>
</html>x